{% extends '_base.html' %}
{% load static %}
{% load humanize %}
{% block page_title %}پرشین گیم|خانه {% endblock %}

{% block page_content %}


      <main class="flex-grow bg-background pb-14 pt-36 xs:pt-36">
        <!-- Main Banners section Start -->
        <section class="mb-8">
          <div class="container relative grid grid-cols-12 gap-x-4 gap-y-2">
            <div class="col-span-12 lg:col-span-8">
              <!-- Swiper -->
              <div class="swiper banner-slider rounded-lg shadow-base">
                <div class="swiper-wrapper">
                    {% for slider_banner in slider_banners %}
                  <div class="swiper-slide">
                    <a href="{{ slider_banner.link }}">
                      <img
                        alt=""
                        class="max-h-[450px]"
                        src="{{ slider_banner.image.url }}"
                      />
                    </a>
                  </div>
                    {% endfor %}

                </div>
                <div class="swiper-button-next hidden md:flex"></div>
                <div class="swiper-button-prev hidden md:flex"></div>
                <div class="swiper-pagination main-banner-pagination"></div>
              </div>
            </div>
            <div class="col-span-12 hidden xs:block lg:col-span-4">
              <div
                class="flex h-full flex-row justify-between gap-x-2 lg:flex-col"
              >
                  {% for side_banner in side_banners %}
                <div>
                  <a href="{{ side_banner.link }}">
                    <img
                      alt=""
                      class="rounded-lg shadow-base"
                      src="{{ side_banner.image.url }}"
                    />
                  </a>
                </div>
                    {% endfor %}

              </div>
            </div>
          </div>
        </section>
        <!-- Main Banners section End -->
{% if discounted_products %}
        <!-- Special Products section Start -->
        <section class="mb-8">
          <div class="container relative">
            <!-- Section Header -->
            <div class="mb-4 flex items-center justify-between">
              <h3 class="font-medium md:text-lg lg:text-xl">پیشنهادات ویژه</h3>
              <a class='flex items-center gap-x-2 py-2 text-sm text-primary lg:text-base' href="{% url 'products' %}">
                مشاهده همه
                <span>
                  <svg class="h-5 w-5 lg:h-6 lg:w-6">
                    <use xlink:href="#chevron-left" />
                  </svg>
                </span>
              </a>
            </div>

            <!-- Section Content -->
            <div class="swiper product-slider p-px">
              <div class="swiper-wrapper">
                  {% for product in discounted_products %}
                <div class="swiper-slide">
                  <!-- Product Card -->
                  <div
                    class="border-gradient group relative rounded-base p-px before:absolute before:-inset-px before:h-[calc(100%+2px)] before:w-[calc(100%+2px)] before:rounded-base"
                  >
                    <div
                      class="relative rounded-xl bg-muted p-2 shadow-base md:p-5"
                    >
                      <!-- image -->
                      <div class="mb-2 md:mb-5" draggable="false">
                        <a href="{{ product.get_absolute_url }}">
                          <img
                            alt=""
                            class="mx-auto w-32 rounded-lg md:w-auto"
                            src="{{ product.image.url }}"
                          />
                        </a>
                      </div>
                      <!-- title -->
                      <div class="mb-2">
                        <a class='line-clamp-2 h-10 text-sm md:h-12 md:text-base' href='{{ product.get_absolute_url }}'>
                          {{ product.title }}
                        </a>
                      </div>
                      <!-- Prices -->
<div class="flex flex-col h-16 justify-between">
    {% if product.discount %}
        <div class="h-5 text-left">
          <del class="text-sm text-text/60 decoration-warning md:text-base">
            {{ product.price|intcomma }}
          </del>
        </div>
        <div class="flex items-center justify-between">
          <p class="w-9 rounded-full bg-warning py-px text-center text-sm text-white">
            {{ product.discount.value|intcomma }}%
          </p>
          <div class="text-sm font-bold text-primary md:text-base">
            {{ product.get_final_price|floatformat:0|intcomma }}
            <span class="text-xs font-light md:text-sm">تومان</span>
          </div>
        </div>
    {% else %}
        <!-- همین ارتفاع بدون تخفیف -->
        <div></div> <!-- یک فضای خالی جایگزین old price -->
        <div class="flex items-center justify-end">
          <div class="text-sm font-bold text-primary md:text-base">
            {{ product.get_final_price|floatformat:0|intcomma }}
            <span class="text-xs font-light md:text-sm">تومان</span>
          </div>
        </div>
    {% endif %}
</div>

                    </div>
                  </div>
                </div>
                    {% endfor %}
              </div>
              <div class="swiper-button-next"></div>
              <div class="swiper-button-prev"></div>
            </div>
          </div>
        </section>
        <!-- Special Products section End -->
          {% endif %}
{% if newest_products %}
        <!-- Newest Products section Start -->

        <section class="mb-8">
          <div class="container relative">
            <!-- Section Header -->
            <div class="mb-4 flex items-center justify-between">
              <h3 class="font-medium md:text-lg lg:text-xl">
                جدیدترین محصولات
              </h3>
              <a class='flex items-center gap-x-2 py-2 text-sm text-primary lg:text-base' href="{% url 'products' %}">
                مشاهده همه
                <span>
                  <svg class="h-5 w-5 lg:h-6 lg:w-6">
                    <use xlink:href="#chevron-left" />
                  </svg>
                </span>
              </a>
            </div>
            <!-- Section Content -->

            <div class="swiper product-slider p-px">
              <div class="swiper-wrapper">
                  {% for product in newest_products %}
                <div class="swiper-slide">
                  <!-- Product Card -->
                  <div
                    class="border-gradient group relative rounded-base p-px before:absolute before:-inset-px before:h-[calc(100%+2px)] before:w-[calc(100%+2px)] before:rounded-base"
                  >
                    <div
                      class="relative rounded-xl bg-muted p-2 shadow-base md:p-5"
                    >
                      <!-- image -->
                      <div class="mb-2 md:mb-5" draggable="false">
                        <a href="{{ product.get_absolute_url }}">
                          <img
                            alt=""
                            class="mx-auto w-32 rounded-lg md:w-auto"
                            src="{{ product.image.url }}"
                          />
                        </a>
                      </div>
                      <!-- title -->
                      <div class="mb-2">
                        <a class='line-clamp-2 h-10 text-sm md:h-12 md:text-base' href='{{ product.get_absolute_url }}'>
                          {{ product.title }}
                        </a>
                      </div>
                      <!-- Prices -->
<div class="flex flex-col h-16 justify-between">
    {% if product.discount %}
        <div class="h-5 text-left">
          <del class="text-sm text-text/60 decoration-warning md:text-base">
            {{ product.price|intcomma }}
          </del>
        </div>
        <div class="flex items-center justify-between">
          <p class="w-9 rounded-full bg-warning py-px text-center text-sm text-white">
            {{ product.discount.value|intcomma }}%
          </p>
          <div class="text-sm font-bold text-primary md:text-base">
            {{ product.get_final_price|floatformat:0|intcomma }}
            <span class="text-xs font-light md:text-sm">تومان</span>
          </div>
        </div>
    {% else %}
        <!-- همین ارتفاع بدون تخفیف -->
        <div></div> <!-- یک فضای خالی جایگزین old price -->
        <div class="flex items-center justify-end">
          <div class="text-sm font-bold text-primary md:text-base">
            {{ product.get_final_price|floatformat:0|intcomma }}
            <span class="text-xs font-light md:text-sm">تومان</span>
          </div>
        </div>
    {% endif %}
</div>

                    </div>
                  </div>
                </div>
                    {% endfor %}
              </div>
              <div class="swiper-button-next"></div>
              <div class="swiper-button-prev"></div>
            </div>

          </div>
        </section>
        <!-- Newest Products section End -->
{% endif %}
        <!-- Category Banners section Start -->
        <section class="mb-8">
          <div class="container relative">
            <div class="flex w-full flex-col justify-between gap-4 md:flex-row">
                {% for middle_banner in middle_banners %}
              <a href="{{ middle_banner.link }}">
                <img
                  alt=""
                  class="rounded-base"
                  src="{{ middle_banner.image.url }}"
                />
              </a>
                {% endfor %}
            </div>
          </div>
        </section>
        <!-- Category Banners section End -->

        <!-- Category section Start -->
        <section class="mb-8">
          <div class="container relative">
            <div
              class="flex flex-wrap items-center justify-center gap-8 lg:justify-between"
            >
              <!-- Category -->
                {% for category in categories %}
              <a class='relative flex w-25 flex-col items-center justify-between gap-y-1.5 sm:w-auto sm:gap-y-2.5' href="{% url 'products' %}?category_slug={{ category.slug }}">
                <div
                  class="border-gradient group relative rounded-full p-px before:absolute before:-inset-px before:h-[calc(100%+2px)] before:w-[calc(100%+2px)] before:rounded-full"
                >
                  <img
                    alt=""
                    class="relative h-25 w-25 rounded-full"
                    src="{{ category.image.url }}"
                  />
                </div>
                <p class="line-clamp-2 h-10 text-center text-sm sm:text-base">
                    {{ category.name }}
                </p>
              </a>
                {% endfor %}
            </div>
          </div>
        </section>
        <!-- Category section End -->

        <!-- Special Products section Start -->
          {% if physical_products %}
        <section class="mb-8">
          <div class="container relative">
            <!-- Section Header -->
            <div class="mb-4 flex items-center justify-between">
              <h3 class="font-medium md:text-lg lg:text-xl">
                محصولات فیزیکی
              </h3>
              <a class='flex items-center gap-x-2 py-2 text-sm text-primary lg:text-base' href="{% url 'products' %}">
                مشاهده همه
                <span>
                  <svg class="h-5 w-5 lg:h-6 lg:w-6">
                    <use xlink:href="#chevron-left" />
                  </svg>
                </span>
              </a>
            </div>
            <!-- Section Content -->
            <div class="swiper product-slider p-px">
              <div class="swiper-wrapper">
                  {% for product in physical_products %}
                <div class="swiper-slide">
                  <!-- Product Card -->
                  <div
                    class="border-gradient group relative rounded-base p-px before:absolute before:-inset-px before:h-[calc(100%+2px)] before:w-[calc(100%+2px)] before:rounded-base"
                  >
                    <div
                      class="relative rounded-xl bg-muted p-2 shadow-base md:p-5"
                    >
                      <!-- image -->
                      <div class="mb-2 md:mb-5" draggable="false">
                        <a href="{{ product.get_absolute_url }}">
                          <img
                            alt=""
                            class="mx-auto w-32 rounded-lg md:w-auto"
                            src="{{ product.image.url }}"
                          />
                        </a>
                      </div>
                      <!-- title -->
                      <div class="mb-2">
                        <a class='line-clamp-2 h-10 text-sm md:h-12 md:text-base' href='{{ product.get_absolute_url }}'>
                          {{ product.title }}
                        </a>
                      </div>
                      <!-- Prices -->
                        <div class="flex flex-col h-16 justify-between">
    {% if product.discount %}
        <div class="h-5 text-left">
          <del class="text-sm text-text/60 decoration-warning md:text-base">
            {{ product.price|intcomma }}
          </del>
        </div>
        <div class="flex items-center justify-between">
          <p class="w-9 rounded-full bg-warning py-px text-center text-sm text-white">
            {{ product.discount.value|intcomma }}%
          </p>
          <div class="text-sm font-bold text-primary md:text-base">
            {{ product.get_final_price|floatformat:0|intcomma }}
            <span class="text-xs font-light md:text-sm">تومان</span>
          </div>
        </div>
    {% else %}
        <!-- همین ارتفاع بدون تخفیف -->
        <div></div> <!-- یک فضای خالی جایگزین old price -->
        <div class="flex items-center justify-end">
          <div class="text-sm font-bold text-primary md:text-base">
            {{ product.get_final_price|floatformat:0|intcomma }}
            <span class="text-xs font-light md:text-sm">تومان</span>
          </div>
        </div>
    {% endif %}
</div>

                    </div>
                  </div>
                </div>
                    {% endfor %}
              </div>
              <div class="swiper-button-next"></div>
              <div class="swiper-button-prev"></div>
            </div>
          </div>
        </section>
          {% endif %}
        <!-- Special Products section End -->

          {% if gift_cards %}
        <section class="mb-8">
          <div class="container relative">
            <!-- Section Header -->
            <div class="mb-4 flex items-center justify-between">
              <h3 class="font-medium md:text-lg lg:text-xl">
گیفت‌ کارت و اشتراک دیجیتال              </h3>
              <a class='flex items-center gap-x-2 py-2 text-sm text-primary lg:text-base' href="{% url 'products' %}">
                مشاهده همه
                <span>
                  <svg class="h-5 w-5 lg:h-6 lg:w-6">
                    <use xlink:href="#chevron-left" />
                  </svg>
                </span>
              </a>
            </div>
            <!-- Section Content -->
            <div class="swiper product-slider p-px">
              <div class="swiper-wrapper">
                  {% for product in gift_cards %}
                <div class="swiper-slide">
                  <!-- Product Card -->
                  <div
                    class="border-gradient group relative rounded-base p-px before:absolute before:-inset-px before:h-[calc(100%+2px)] before:w-[calc(100%+2px)] before:rounded-base"
                  >
                    <div
                      class="relative rounded-xl bg-muted p-2 shadow-base md:p-5"
                    >
                      <!-- image -->
                      <div class="mb-2 md:mb-5" draggable="false">
                        <a href="{{ product.get_absolute_url }}">
                          <img
                            alt=""
                            class="mx-auto w-32 rounded-lg md:w-auto"
                            src="{{ product.image.url }}"
                          />
                        </a>
                      </div>
                      <!-- title -->
                      <div class="mb-2">
                        <a class='line-clamp-2 h-10 text-sm md:h-12 md:text-base' href='{{ product.get_absolute_url }}'>
                          {{ product.title }}
                        </a>
                      </div>
                      <!-- Prices -->
                       <div class="flex flex-col h-16 justify-between">
    {% if product.discount %}
        <div class="h-5 text-left">
          <del class="text-sm text-text/60 decoration-warning md:text-base">
            {{ product.price|intcomma }}
          </del>
        </div>
        <div class="flex items-center justify-between">
          <p class="w-9 rounded-full bg-warning py-px text-center text-sm text-white">
            {{ product.discount.value|intcomma }}%
          </p>
          <div class="text-sm font-bold text-primary md:text-base">
            {{ product.get_final_price|floatformat:0|intcomma }}
            <span class="text-xs font-light md:text-sm">تومان</span>
          </div>
        </div>
    {% else %}
        <!-- همین ارتفاع بدون تخفیف -->
        <div></div> <!-- یک فضای خالی جایگزین old price -->
        <div class="flex items-center justify-end">
          <div class="text-sm font-bold text-primary md:text-base">
            {{ product.get_final_price|floatformat:0|intcomma }}
            <span class="text-xs font-light md:text-sm">تومان</span>
          </div>
        </div>
    {% endif %}
</div>

                    </div>
                  </div>
                </div>
                    {% endfor %}
              </div>
              <div class="swiper-button-next"></div>
              <div class="swiper-button-prev"></div>
            </div>
          </div>
        </section>
          {% endif %}
        <!-- Blog section Start -->

        <!-- Blog section End -->
      </main>


{% endblock %}